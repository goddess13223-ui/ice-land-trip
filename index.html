<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å†°å³¶éš¨èº«åŠ©ç† 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #3498db;
            --danger: #e74c3c;
            --bg: #f8f9fa;
            --card: #ffffff;
            --text: #2c3e50;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            margin: 0; background: var(--bg); color: var(--text);
            overflow-x: hidden;
        }

        /* SPA æ¶æ§‹èˆ‡å‹•ç•« */
        .page { 
            display: none; padding: 20px 15px 100px; 
            animation: fadeIn 0.4s ease-out; 
        }
        .page.active { display: block; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* é ‚éƒ¨å³æ™‚è³‡è¨Šå„€è¡¨æ¿ */
        .dashboard {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white; padding: 20px; border-radius: 15px;
            margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        /* æš´é¢¨é›ªé˜²å‘†è­¦ç¤º [cite: 25, 26] */
        #storm-alert {
            display: none; background: var(--danger); color: white;
            padding: 10px; border-radius: 8px; margin-bottom: 15px;
            border: 2px solid #fff; font-weight: bold; animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }

        /* è¡Œç¨‹å¡ç‰‡ [cite: 18, 20] */
        .card {
            background: var(--card); border-radius: 12px; margin-bottom: 15px;
            overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border-left: 5px solid var(--accent);
        }
        .card img { width: 100%; height: 180px; object-fit: cover; }
        .card-content { padding: 15px; }
        .tag { font-size: 12px; padding: 2px 8px; border-radius: 10px; background: #eee; margin-right: 5px; }
        .btn-nav { 
            display: inline-block; background: var(--accent); color: white;
            padding: 8px 15px; border-radius: 20px; text-decoration: none;
            margin-top: 10px; font-size: 14px;
        }

        /* åº•éƒ¨å°èˆª  */
        .bottom-nav {
            position: fixed; bottom: 0; width: 100%; height: 70px;
            background: white; display: flex; justify-content: space-around;
            align-items: center; box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        .nav-item { border: none; background: none; color: #95a5a6; font-size: 12px; cursor: pointer; }
        .nav-item.active { color: var(--accent); font-weight: bold; }

        /* æºé€šåœ–å¡ [cite: 14, 15] */
        details { background: white; margin-bottom: 10px; border-radius: 8px; }
        summary { padding: 15px; font-weight: bold; list-style: none; border-bottom: 1px solid #eee; }
        .phrase-item { padding: 15px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; }

        /* å…¨è¢å¹•æ¨¡å¼ [cite: 16] */
        #focus-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: black; color: white; z-index: 2000;
            justify-content: center; align-items: center; text-align: center; padding: 20px;
        }
        #focus-modal h1 { font-size: 3rem; word-break: break-word; }

        /* è¨˜å¸³æœ¬ [cite: 28, 29] */
        .expense-list { margin-top: 15px; }
        .expense-item { display: flex; justify-content: space-between; padding: 10px; background: #fff; margin-bottom: 5px; }
    </style>
</head>
<body>

    <div id="focus-modal" onclick="this.style.display='none'">
        <div id="focus-text"></div>
        <p style="margin-top: 20px; font-size: 14px; opacity: 0.6;">é»æ“Šä»»æ„è™•é—œé–‰</p>
    </div>

    <div id="page-home" class="page active">
        <div class="dashboard">
            <h2>å†°å³¶è‡ªé§•åŠ©ç† ğŸ‡®ğŸ‡¸</h2>
            <div id="storm-alert">âš ï¸ åµæ¸¬åˆ°å¼·é¢¨è­¦å ±ï¼è«‹å‹¿é–‹é–€ä»¥å…è»Šé–€æå£ã€‚</div>
            <div id="weather-info">è¼‰å…¥å¤©æ°£ä¸­... â˜€ï¸</div>
            <div style="margin-top: 15px; font-size: 14px;">
                <p>ğŸš— ç§Ÿè»Š: LOTUS Car Rental (+354 787 4444) [cite: 47, 48]</p>
                <p>ğŸ“… ä»Šæ—¥: 2026/09/28 (Day 2)</p>
            </div>
        </div>
        
        <h3>å¿«é€Ÿå·¥å…·</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <a href="https://www.road.is" class="btn-nav" style="text-align: center; background: #27ae60;">è·¯æ³æŸ¥è©¢ (Road.is)</a>
            <a href="https://en.vedur.is/weather/forecasts/aurora/" class="btn-nav" style="text-align: center; background: #8e44ad;">æ¥µå…‰é æ¸¬</a>
        </div>
    </div>

    <div id="page-itinerary" class="page">
        <div id="day-selector" style="overflow-x: auto; white-space: nowrap; margin-bottom: 20px; padding-bottom: 5px;">
            </div>
        <div id="itinerary-content">
            </div>
    </div>

    <div id="page-lang" class="page">
        <h3>å†°å³¶èªæºé€šåŠ©æ‰‹ (é»æ“Šæ”¾å¤§)</h3>
        <details>
            <summary>ğŸ´ é¤å»³èˆ‡é»é¤</summary>
            <div class="phrase-item" onclick="showFocus('Geta fengiÃ° matseÃ°ilinn?','Can I have the menu?')">
                <div><span>Geta fengiÃ° matseÃ°ilinn?</span><br><small>å¯ä»¥çµ¦æˆ‘èœå–®å—ï¼Ÿ</small></div>
                <span>ğŸ”</span>
            </div>
            <div class="phrase-item" onclick="showFocus('Reikninginn, takk','The check, please')">
                <div><span>Reikninginn, takk</span><br><small>è«‹çµå¸³ï¼Œè¬è¬</small></div>
                <span>ğŸ”</span>
            </div>
        </details>
        <details>
            <summary>ğŸ†˜ ç·Šæ€¥ç‹€æ³</summary>
            <div class="phrase-item" onclick="showFocus('HjÃ¡lp!','Help!')">
                <div><span>HjÃ¡lp!</span><br><small>æ•‘å‘½ï¼</small></div>
                <span>ğŸ”</span>
            </div>
        </details>
    </div>

    <div id="page-tools" class="page">
        <h3>æ—…éŠè¨˜å¸³æœ¬ (ISK/TWD)</h3>
        <div class="card-content" style="background: white; border-radius: 12px; padding: 15px;">
            <input type="text" id="exp-name" placeholder="é …ç›®" style="width: 40%; padding: 8px;">
            <input type="number" id="exp-amount" placeholder="é‡‘é¡" style="width: 30%; padding: 8px;">
            <button onclick="addExpense()" style="width: 20%; padding: 8px;">æ–°å¢</button>
            <div id="expense-list" class="expense-list"></div>
            <hr>
            <strong>ç¸½è¨ˆ: $<span id="total-amount">0</span></strong>
            <button onclick="clearExpenses()" style="background: none; border: none; color: var(--danger); float: right;">å…¨éƒ¨æ¸…é™¤</button>
        </div>

        <h3 style="margin-top: 25px;">å‡ºç™¼æª¢æŸ¥æ¸…å–®</h3>
        <div id="checklist-container">
            </div>
    </div>

    <nav class="bottom-nav">
        <button class="nav-item active" onclick="switchPage('home')">ğŸ <br>å„€è¡¨æ¿</button>
        <button class="nav-item" onclick="switchPage('itinerary')">ğŸ“…<br>è¡Œç¨‹</button>
        <button class="nav-item" onclick="switchPage('lang')">ğŸ’¬<br>æºé€š</button>
        <button class="nav-item" onclick="switchPage('tools')">ğŸ’°<br>å·¥å…·</button>
    </nav>

    <script>
        // è¡Œç¨‹è³‡æ–™åº« [cite: 38-169]
        const itineraryData = {
            2: {
                title: "Day 2: æŠµé”é›·å…‹é›…ç¶­å…‹",
                items: [
                    { type: "ğŸš—", name: "LOTUS å–è»Š", desc: "å¯†ç¢¼: +354 7874444", img: "https://images.unsplash.com/photo-1504541891213-1b1dfdadb739?auto=format&fit=crop&w=400", map: "LOTUS+Car+Rental+Keflavik" },
                    { type: "ğŸ´", name: "Old Iceland é¤å»³", desc: "æ¨è–¦: ç¾Šè‚‰æ¹¯ (é ç®— NT$1500-2000)", img: "https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?auto=format&fit=crop&w=400", map: "Old+Iceland+Restaurant" },
                    { type: "ğŸ“", name: "å“ˆçˆ¾æ ¼æ—å§†æ•™å ‚", desc: "å¿…çœ‹åœ°æ¨™èˆ‡å¤œæ™¯", img: "https://images.unsplash.com/photo-1529963183134-61a90db47eaf?auto=format&fit=crop&w=400", map: "Hallgrimskirkja" }
                ]
            },
            3: {
                title: "Day 3: æ–¯å¥ˆå±±åŠå³¶",
                items: [
                    { type: "ğŸ¥", name: "Sandholt éºµåŒ…åº—", desc: "7:30 ç‡Ÿæ¥­ï¼Œæ¨è–¦è‚‰æ¡‚æ²", img: "https://images.unsplash.com/photo-1509440159596-0249088772ff?auto=format&fit=crop&w=400", map: "Sandholt" },
                    { type: "ğŸ“", name: "æ•™æœƒå±± Kirkjufell", desc: "ç™½æ—¥å¤¢å†’éšªç‹æ‹æ”åœ°", img: "https://images.unsplash.com/photo-1476610182048-b716b8518aae?auto=format&fit=crop&w=400", map: "Kirkjufell" }
                ]
            },
            11: {
                title: "Day 11: å—å²¸ç€‘å¸ƒç·š",
                items: [
                    { type: "ğŸŒŠ", name: "SkÃ³gafoss æ–¯ç§‘åŠ ç€‘å¸ƒ", desc: "Mia's Country Van ç‚¸é­šè–¯æ¢", img: "https://images.unsplash.com/photo-1476611317561-60117649dd94?auto=format&fit=crop&w=400", map: "Skogafoss" },
                    { type: "ğŸ–ï¸", name: "Vik é»‘æ²™ç˜", desc: "é»‘æ²™ç˜èˆ‡ç„æ­¦å²©æŸ±", img: "https://images.unsplash.com/photo-1504541891213-1b1dfdadb739?auto=format&fit=crop&w=400", map: "Reynisfjara+Beach" }
                ]
            }
            // ... å¯ä¾æ­¤é¡æ¨è£œé½Š 13 å¤©è³‡æ–™
        };

        // SPA é é¢åˆ‡æ› [cite: 5, 7]
        function switchPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('page-' + pageId).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');
            window.scrollTo(0, 0);
        }

        // æ¸²æŸ“è¡Œç¨‹ [cite: 18, 22]
        function renderItinerary(day) {
            const container = document.getElementById('itinerary-content');
            const data = itineraryData[day] || { title: `Day ${day}: è¡Œç¨‹è¦åŠƒä¸­`, items: [] };
            
            let html = `<h2>${data.title}</h2>`;
            data.items.forEach(item => {
                html += `
                    <div class="card">
                        <img src="${item.img}" alt="${item.name}">
                        <div class="card-content">
                            <span class="tag">${item.type}</span>
                            <strong>${item.name}</strong>
                            <p style="font-size:14px; color: #666;">${item.desc}</p>
                            <a href="https://www.google.com/maps/search/?api=1&query=${item.map}" class="btn-nav">ğŸ“ é–‹å•Ÿå°èˆª</a>
                        </div>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        // å…¨è¢å¹•å±•ç¤º [cite: 16]
        function showFocus(is, en) {
            const modal = document.getElementById('focus-modal');
            document.getElementById('focus-text').innerHTML = `<h1>${is}</h1><p>${en}</p>`;
            modal.style.display = 'flex';
        }

        // æ¨¡æ“¬æš´é¢¨é›ªç›£æ§ 
        function checkWeather() {
            // å¯¦ä½œä¸­å¯ä»‹æ¥ OpenWeather API
            const windSpeed = 18; // æ¨¡æ“¬æ•¸æ“š
            if (windSpeed > 15) {
                document.getElementById('storm-alert').style.display = 'block';
            }
        }

        // åˆå§‹åŒ–
        window.onload = () => {
            const daySelector = document.getElementById('day-selector');
            for(let i=1; i<=13; i++) {
                const btn = document.createElement('button');
                btn.innerText = `Day ${i}`;
                btn.className = 'btn-nav';
                btn.style.marginRight = '5px';
                btn.onclick = () => renderItinerary(i);
                daySelector.appendChild(btn);
            }
            renderItinerary(2);
            checkWeather();
            loadExpenses();
        };

        // è¨˜å¸³æœ¬é‚è¼¯ [cite: 29, 30]
        function addExpense() {
            const name = document.getElementById('exp-name').value;
            const amt = document.getElementById('exp-amount').value;
            if(!name || !amt) return;
            const expenses = JSON.parse(localStorage.getItem('expenses') || '[]');
            expenses.push({name, amt: parseFloat(amt)});
            localStorage.setItem('expenses', JSON.stringify(expenses));
            loadExpenses();
        }

        function loadExpenses() {
            const expenses = JSON.parse(localStorage.getItem('expenses') || '[]');
            const list = document.getElementById('expense-list');
            let total = 0;
            list.innerHTML = expenses.map(e => {
                total += e.amt;
                return `<div class="expense-item"><span>${e.name}</span><span>$${e.amt}</span></div>`;
            }).join('');
            document.getElementById('total-amount').innerText = total;
        }

        function clearExpenses() {
            localStorage.removeItem('expenses');
            loadExpenses();
        }
    </script>
</body>
</html>
