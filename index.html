<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å†°å³¶è‡ªé§•å…¨èƒ½åŠ©æ‰‹ 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #2c3e50; --accent: #3498db; --danger: #e74c3c; --success: #2ecc71; --bg: #f8f9fa; --card: #ffffff; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Noto Sans TC', sans-serif; margin: 0; background: var(--bg); color: #2c3e50; overflow-x: hidden; }

        /* SPA Framework */
        .page { display: none; padding: 20px 15px 100px; animation: fadeIn 0.4s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* Dashboard */
        .dashboard { background: linear-gradient(135deg, #1e3c72, #2a5298); color: white; padding: 25px 20px; border-radius: 20px; margin-bottom: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .alert-banner { display: none; background: var(--danger); color: white; padding: 12px; border-radius: 10px; margin-bottom: 15px; font-weight: bold; border: 2px solid white; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }

        /* Day Tabs */
        .day-scroller { overflow-x: auto; display: flex; gap: 10px; padding: 5px 0 15px; scrollbar-width: none; }
        .day-scroller::-webkit-scrollbar { display: none; }
        .day-tab { flex: 0 0 auto; width: 65px; height: 45px; display: flex; align-items: center; justify-content: center; background: white; border: 1px solid #ddd; border-radius: 12px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .day-tab.active { background: var(--accent); color: white; border-color: var(--accent); transform: scale(1.1); }

        /* Cards */
        .card { background: var(--card); border-radius: 18px; margin-bottom: 20px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05); border: 1px solid #eee; }
        .card img { width: 100%; height: 220px; object-fit: cover; }
        .card-body { padding: 18px; }
        .tag { display: inline-block; padding: 4px 10px; background: #ebf5fb; color: var(--accent); border-radius: 8px; font-size: 12px; font-weight: bold; margin-bottom: 8px; }
        .btn-nav { display: flex; align-items: center; justify-content: center; gap: 8px; background: var(--success); color: white; padding: 14px; border-radius: 12px; text-decoration: none; font-weight: bold; margin-top: 15px; }

        /* Expense & Tools */
        .tool-section { background: white; border-radius: 18px; padding: 20px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .input-row { display: flex; gap: 8px; margin-bottom: 15px; }
        input { flex: 1; padding: 12px; border: 1px solid #ddd; border-radius: 10px; font-size: 16px; }
        .expense-list { margin-top: 15px; border-top: 1px solid #eee; }
        .expense-item { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #fafafa; }
        .total-box { background: #fdf2f2; padding: 15px; border-radius: 12px; margin-top: 10px; }

        /* Checklist */
        .check-item { display: flex; align-items: center; padding: 12px 0; border-bottom: 1px solid #eee; }
        .check-item input { width: 22px; height: 22px; margin-right: 12px; flex: none; }

        /* Bottom Nav */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; height: 80px; background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); display: flex; justify-content: space-around; align-items: center; box-shadow: 0 -5px 15px rgba(0,0,0,0.05); z-index: 1000; padding-bottom: env(safe-area-inset-bottom); }
        .nav-btn { border: none; background: none; color: #95a5a6; font-size: 12px; cursor: pointer; transition: 0.3s; }
        .nav-btn.active { color: var(--accent); font-weight: bold; }
        .nav-btn i { font-size: 22px; display: block; margin-bottom: 4px; }

        /* Focus Modal */
        #focus-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; color: white; z-index: 2000; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 30px; }
    </style>
</head>
<body>

    <div id="focus-modal" onclick="this.style.display='none'">
        <div id="focus-text"></div>
        <p style="margin-top: 50px; opacity: 0.4;">é»æ“Šè¢å¹•ä»»ä½•åœ°æ–¹é—œé–‰</p>
    </div>

    <div id="page-home" class="page active">
        <div class="dashboard">
            <h1 style="margin:0">GÃ³Ã°an daginn! ğŸ‡®ğŸ‡¸</h1>
            <p>å†°å³¶ 17 æ—¥è‡ªé§•æ—…è¡Œ (2026/09/27 å‡ºç™¼)</p>
            <div id="storm-alert" class="alert-banner">ğŸš¨ è­¦å‘Šï¼šåµæ¸¬åˆ°å¼·é¢¨å€åŸŸï¼Œé–‹è»Šé–€è«‹ç·Šæ¡ï¼</div>
            <div style="margin-top:20px; font-size: 14px; opacity: 0.9;">
                ğŸš— ç§Ÿè»Šï¼šLOTUS (+354 787 4444)<br>
                ğŸ” å–è»Šå¯†ç¢¼ï¼š+354 7874444
            </div>
        </div>

        <h3>å³æ™‚ç›£æ§</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 25px;">
            <a href="https://en.vedur.is/weather/forecasts/aurora/" target="_blank" class="day-tab" style="width:100%; border-color:#8e44ad; color:#8e44ad">ğŸŒŒ æ¥µå…‰é æ¸¬</a>
            <a href="https://www.road.is/" target="_blank" class="day-tab" style="width:100%; border-color:#e67e22; color:#e67e22">ğŸ›£ï¸ å¯¦æ™‚è·¯æ³</a>
        </div>
        
        <h3>ä»Šæ—¥æ¦‚è¦½</h3>
        <div class="tool-section" id="today-summary">
            è«‹å‰å¾€ã€Œè¡Œç¨‹ã€åˆ†é é¸æ“‡å¤©æ•¸ã€‚
        </div>
    </div>

    <div id="page-itinerary" class="page">
        <div class="day-scroller" id="day-tabs"></div>
        <div id="itinerary-content"></div>
    </div>

    <div id="page-tools" class="page">
        <h3>ğŸ’° å†°å³¶æ—…éŠè¨˜å¸³ (ISK â†’ TWD)</h3>
        <div class="tool-section">
            <div style="font-size: 12px; color: #666; margin-bottom: 10px;">ç›®å‰åŒ¯ç‡åƒè€ƒï¼š1 ISK â‰ˆ 0.23 TWD</div>
            <div class="input-row">
                <input type="text" id="exp-name" placeholder="é …ç›®å…§å®¹">
                <input type="number" id="exp-amt" placeholder="ISK é‡‘é¡">
                <button onclick="addExpense()" style="background: var(--accent); color: white; border: none; padding: 10px 15px; border-radius: 10px; font-weight: bold;">æ–°å¢</button>
            </div>
            <div id="expense-list" class="expense-list"></div>
            <div class="total-box">
                <div style="display: flex; justify-content: space-between; font-weight: bold;">
                    <span>ç¸½è¨ˆ (ISK)</span>
                    <span id="total-isk">0</span>
                </div>
                <div style="display: flex; justify-content: space-between; font-weight: bold; color: var(--accent); margin-top: 5px;">
                    <span>æ›ç®— (TWD)</span>
                    <span id="total-twd">0</span>
                </div>
            </div>
            <button onclick="clearExpenses()" style="width: 100%; margin-top: 15px; background: none; border: none; color: #999; font-size: 12px; text-decoration: underline;">æ¸…é™¤æ‰€æœ‰ç´€éŒ„</button>
        </div>

        <h3>ğŸ’ è¡Œå‰æª¢æŸ¥æ¸…å–®</h3>
        <div class="tool-section" id="checklist-container"></div>
    </div>

    <div id="page-lang" class="page">
        <h3>æºé€šè¼”åŠ©åœ–å¡ (é»æ“Šæ”¾å¤§)</h3>
        <div class="tool-section" onclick="showFocus('Takk fyrir','Thank you (è¬è¬)')">è¬è¬: Takk fyrir</div>
        <div class="tool-section" onclick="showFocus('Geta fengiÃ° reikninginn?','Can I have the bill? (çµå¸³)')">çµå¸³: Geta fengiÃ° reikninginn?</div>
        <div class="tool-section" onclick="showFocus('Hvar er nÃ¦sta bensÃ­nstÃ¶Ã°?','Where is the gas station? (åŠ æ²¹ç«™åœ¨å“ªï¼Ÿ)')">è©¢å•åŠ æ²¹ç«™</div>
        <div class="tool-section" onclick="showFocus('HjÃ¡lp! BÃ­llinn er fastur!','Help! The car is stuck! (æ•‘å‘½ï¼è»Šå¡ä½äº†ï¼)')" style="border: 2px solid var(--danger);">æ•‘æ´è«‹æ±‚: HjÃ¡lp!</div>
    </div>

    <nav class="bottom-nav">
        <button class="nav-btn active" onclick="switchPage('home')">ğŸ <br>å„€è¡¨æ¿</button>
        <button class="nav-btn" onclick="switchPage('itinerary')">ğŸ“…<br>è¡Œç¨‹</button>
        <button class="nav-btn" onclick="switchPage('tools')">ğŸ’°<br>å·¥å…·</button>
        <button class="nav-btn" onclick="switchPage('lang')">ğŸ’¬<br>æºé€š</button>
    </nav>

    <script>
        const exchangeRate = 0.23; // 1 ISK = 0.23 TWD 
        
        // å®Œæ•´ 13 å¤©è¡Œç¨‹è³‡æ–™åº« [cite: 38-169]
        const fullItinerary = {
            1: { title: "9/27 å°ç£ â†’ å†°å³¶", items: [
                { tag: "âœˆï¸ äº¤é€š", name: "åœ‹éš›èˆªç­å‡ºç™¼", desc: "å°ç£å•Ÿç¨‹ï¼Œå¤œå®¿æ©Ÿä¸Šã€‚ [cite: 40-43]", img: "https://images.unsplash.com/photo-1436491865332-7a61a109cc05?w=600", map: "Keflavik+Airport" }
            ]},
            2: { title: "9/28 æŠµé”é›·å…‹é›…ç¶­å…‹", items: [
                { tag: "ğŸš— ç§Ÿè»Š", name: "LOTUS Car Rental å–è»Š", desc: "é›»è©±ï¼š+354 787 4444ã€‚è‡ªåŠ©å–è»Šå¯†ç¢¼ï¼š+354 7874444 [cite: 46-49]", img: "https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?w=600", map: "Lotus+Car+Rental+Keflavik" },
                { tag: "ğŸ  ä½å®¿", name: "SkÃ³lavÃ¶rÃ°ustÃ­gur Apartments", desc: "åœ°å€: SkÃ³lavÃ¶rÃ°ustÃ­gur 21A. åœè»Šå»ºè­° P2è—/P3ç¶ ã€‚ [cite: 51-56]", img: "https://images.unsplash.com/photo-1555854811-8aa32c7edd90?w=600", map: "SkÃ³lavÃ¶rÃ°ustÃ­gur+21A+ReykjavÃ­k" },
                { tag: "ğŸ´ æ™šé¤", name: "Old Iceland (éœ€è¨‚ä½)", desc: "æ¨è–¦ï¼šIcelandic Lamb Soupã€‚é ç®— NT$1,500â€“2,000/äººã€‚ [cite: 58-61]", img: "https://images.unsplash.com/photo-1544025162-d76694265947?w=600", map: "Old+Iceland+Restaurant" },
                { tag: "ğŸ“ å¸‚å€", name: "å½©è™¹è¡— & å“ˆçˆ¾æ ¼æ—å§†æ•™å ‚", desc: "åŒ…å« Laugavegur ä¸»è¡—æ¡è²· (Bonus å°è±¬è¶…å¸‚)ã€‚ [cite: 63-66]", img: "https://images.unsplash.com/photo-1529963183134-61a90db47eaf?w=600", map: "Hallgrimskirkja" }
            ]},
            3: { title: "9/29 æ–¯å¥ˆå±±åŠå³¶", items: [
                { tag: "â˜• æ—©é¤", name: "Bakari Sandholt", desc: "7:30 ç‡Ÿæ¥­ã€‚æ¨è–¦è‚‰æ¡‚æ²èˆ‡å¯é Œã€‚ [cite: 68]", img: "https://images.unsplash.com/photo-1509440159596-0249088772ff?w=600", map: "Sandholt+Reykjavik" },
                { tag: "ğŸ“ æ™¯é»", name: "Ytri Tunga æµ·è±¹æ²™ç˜ & æ•™æœƒå±±", desc: "æ–¯å¥ˆå±±ç¶“å…¸åœ°æ¨™ Kirkjufellã€‚ [cite: 70-71]", img: "https://images.unsplash.com/photo-1476610182048-b716b8518aae?w=600", map: "Kirkjufell" },
                { tag: "ğŸ´ æ™šé¤", name: "Harbour CafÃ©", desc: "å¿…é»ï¼šPlokkfiskur (é±ˆé­šé¦¬éˆ´è–¯æ³¥)ã€‚é­šæ¹¯é™„éºµåŒ…é ‚ç´šã€‚ [cite: 74]", img: "https://images.unsplash.com/photo-1559339352-11d035aa65de?w=600", map: "Harbour+CafÃ©+GrundarfjÃ¶rÃ°ur" }
            ]},
            4: { title: "9/30 é›·å…‹é›…ç¶­å…‹ â†’ è¥¿éƒ¨", items: [
                { tag: "ğŸ“ å¸‚å€", name: "å¤ªé™½èˆªæµ·è€… & éŸ³æ¨‚å»³", desc: "æ‰˜å¯§æ¹–æ•£æ­¥ï¼Œåˆé¤åƒ BÃ¦jarins Beztu Pylsur ç†±ç‹—ã€‚ [cite: 82-85]", img: "https://images.unsplash.com/photo-1517524285303-d6fc683dddf8?w=600", map: "Harpa+Concert+Hall" },
                { tag: "ğŸ´ æ™šé¤", name: "Messinn ReykjavÃ­k", desc: "æ¨è–¦ï¼šArctic Char & Seafood Pastaã€‚ [cite: 87-88]", img: "https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=600", map: "Messinn+ReykjavÃ­k" },
                { tag: "ğŸ  ä½å®¿", name: "Hraunsnef Country Hotel", desc: "è¥¿éƒ¨è¾²å ´é¢¨æ ¼æ—…é¤¨ã€‚ [cite: 94]", img: "https://images.unsplash.com/photo-1507502707541-f369a3b18502?w=600", map: "Hraunsnef+Country+Hotel" }
            ]},
            5: { title: "10/1 è¥¿éƒ¨ â†’ åŒ—éƒ¨", items: [
                { tag: "ğŸ“ æ™¯é»", name: "ç†”å²©ç€‘å¸ƒ Hraunfossar", desc: "çµ•ç¾è—è‰²æµæ°´ã€‚è£œçµ¦ç«™ï¼šé¯¨é­šæ•™å ‚ã€‚ [cite: 99-100]", img: "https://images.unsplash.com/photo-1520050206274-a1af4463d84d?w=600", map: "Hraunfossar" },
                { tag: "ğŸ  ä½å®¿", name: "SiglÃ³ HÃ³tel", desc: "åŒ…å«æ—©é¤ï¼Œä½æ–¼ SiglufjÃ¶rÃ°urã€‚ [cite: 102-103]", img: "https://images.unsplash.com/photo-1512918728675-ed5a9ecdebfd?w=600", map: "Siglo+Hotel" }
            ]},
            6: { title: "10/2 åŒ—éƒ¨ç¶“å…¸ç·š", items: [
                { tag: "ğŸ“ æ™¯é»", name: "çœ¾ç¥ç€‘å¸ƒ GoÃ°afoss", desc: "é˜¿åº«é›·é‡Œè£œçµ¦ (Bonus/Netto)ã€‚ [cite: 107-108]", img: "https://images.unsplash.com/photo-1520050206274-a1af4463d84d?w=600", map: "Godafoss" },
                { tag: "â™¨ï¸ é«”é©—", name: "ç±³æ¹–æº«æ³‰ MÃ½vatn Nature Baths", desc: "12:00â€“22:00ã€‚åœ°ç†±è°· Hverir æ™¯è§€ã€‚ [cite: 111-112]", img: "https://images.unsplash.com/photo-1502452213796-f4c28f607f3c?w=600", map: "Myvatn+Nature+Baths" }
            ]},
            7: { title: "10/3 æ±éƒ¨å³½ç£", items: [
                { tag: "ğŸ“ æ™¯é»", name: "Dettifoss & æ´ç©´æº«æ³‰", desc: "åŒ…å« StuÃ°lafoss ç„æ­¦å²©ç€‘å¸ƒã€‚ [cite: 118-121]", img: "https://images.unsplash.com/photo-1490682143124-c152463e7a33?w=600", map: "Dettifoss" },
                { tag: "ğŸ¬ æ™¯é»", name: "SeyÃ°isfjÃ¶rÃ°ur", desc: "ç™½æ—¥å¤¢å†’éšªç‹æ‹æ”åœ°ã€‚æ™šé¤ Kaffi LÃ¡raã€‚ [cite: 123-125]", img: "https://images.unsplash.com/photo-1520638575003-887469733c70?w=600", map: "SeyÃ°isfjÃ¶rÃ°ur" }
            ]},
            8: { title: "10/4 å†°å·æ¢éšª (Day 1)", items: [
                { tag: "â„ï¸ é‡é»", name: "Blue Ice Cave Adventure", desc: "09:00 å‡ºç™¼ã€‚8äººå°åœ˜ã€‚å·²ä»˜æ¬¾ã€‚ [cite: 133-135]", img: "https://images.unsplash.com/photo-1472214103451-9374bd1c798e?w=600", map: "VatnajÃ¶kull+National+Park" },
                { tag: "ğŸ  ä½å®¿", name: "SkyrhÃºsid Guesthouse", desc: "é€£ä½äºŒæ™šã€‚ [cite: 130]", img: "https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=600", map: "SkyrhÃºsid" }
            ]},
            9: { title: "10/5 å†°å·å¥è¡Œ (Day 2)", items: [
                { tag: "ğŸ“ å€åŸŸ", name: "å†°å·å‘¨é‚Šæ·±åº¦éŠ", desc: "é€£ä½ SkyrhÃºsidï¼Œå»ºè­°é ç•™é«”åŠ›ã€‚ [cite: 128-131]", img: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=600", map: "SkyrhÃºsid" }
            ]},
            10: { title: "10/6 å†°æ²³æ¹–", items: [
                { tag: "ğŸ›¶ é«”é©—", name: "å†°æ²³æ¹–éŠèˆ¹ & é‘½çŸ³æ²™ç˜", desc: "JÃ¶kulsÃ¡rlÃ³n & FjallsÃ¡rlÃ³nã€‚ [cite: 137-140]", img: "https://images.unsplash.com/photo-1470770841072-f978cf4d019e?w=600", map: "JÃ¶kulsÃ¡rlÃ³n" },
                { tag: "ğŸ´ æ™šé¤", name: "Kjarr Restaurant & Bar", desc: "æ¨è–¦ï¼šSeafood pasta / Arctic charã€‚ [cite: 143]", img: "https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=600", map: "Kjarr+Restaurant" }
            ]},
            11: { title: "10/7 å—å²¸ç€‘å¸ƒç·š", items: [
                { tag: "ğŸŒŠ æ™¯é»", name: "æ–¯ç§‘åŠ  & å¡é‡Œé›…è˜­ç€‘å¸ƒ", desc: "å¿…åƒ Mia's Country Van ç‚¸é­šè–¯æ¢ã€‚ ", img: "https://images.unsplash.com/photo-1518709268805-4e9042af9f23?w=600", map: "Skogafoss" },
                { tag: "ğŸ–ï¸ æ™¯é»", name: "Vik é»‘æ²™ç˜", desc: "StrÃ¶ndin Pub ç‰›è‚‰æ¼¢å ¡ã€‚ [cite: 148]", img: "https://images.unsplash.com/photo-1504541891213-1b1dfdadb739?w=400", map: "Reynisfjara+Beach" }
            ]},
            12: { title: "10/8 é»ƒé‡‘åœˆ", items: [
                { tag: "ğŸŒ‹ æ™¯é»", name: "ç«å£æ¹– & é–“æ­‡æ³‰", desc: "KeriÃ°ã€Strokkurã€Gullfossã€è¾›æ ¼éŸ‹å¾·åˆ©ã€‚ [cite: 156-160]", img: "https://images.unsplash.com/photo-1533560235473-19601cb8969f?w=600", map: "Geysir" }
            ]},
            13: { title: "10/9 æº«æ³‰ & é‚„è»Š", items: [
                { tag: "â™¨ï¸ é«”é©—", name: "Sky Lagoon", desc: "11:00â€“22:00ã€‚æœ€å¾Œçš„æ”¾é¬†ã€‚ [cite: 164]", img: "https://images.unsplash.com/photo-1510218830377-1e9c2170bb07?w=600", map: "Sky+Lagoon" },
                { tag: "ğŸš— é‚„è»Š", name: "20:00 LOTUS é‚„è»Š", desc: "é£¯åº—æ¥é§å‰å¾€ Aurora Hotel Airportã€‚ [cite: 166-169]", img: "https://images.unsplash.com/photo-1436491865332-7a61a109cc05?w=600", map: "Lotus+Car+Rental+Keflavik" }
            ]}
        };

        const checklistItems = ["è­·ç…§æ­£æœ¬ & é§•ç…§æ­£æœ¬", "ä¿¡ç”¨å¡ (å¸¶2å¼µé é˜²è¬ä¸€)", "é˜²æ°´å¤–å¥— & é˜²æ°´è¤² (ç€‘å¸ƒç”¨)", "ç™»å±±é‹/é˜²æ°´é‹", "æ¯›å¸½ã€åœå·¾ã€é˜²æ°´æ‰‹å¥—", "æ³³è£ (æ³¡æº«æ³‰ç”¨)", "å°è±¬è¶…å¸‚è³¼ç‰©è¢‹", "æ‰‹æ©Ÿé›¢ç·šåœ°åœ–ä¸‹è¼‰"];

        // SPA Navigation
        function switchPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('page-' + pageId).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            event.currentTarget.classList.add('active');
            window.scrollTo(0,0);
        }

        // Render Day Itinerary
        function renderDay(d) {
            document.querySelectorAll('.day-tab').forEach(t => t.classList.remove('active'));
            document.getElementById('tab-day-' + d).classList.add('active');
            const data = fullItinerary[d];
            let html = `<h3>${data.title}</h3>`;
            data.items.forEach(item => {
                html += `
                    <div class="card">
                        <img src="${item.img}">
                        <div class="card-body">
                            <span class="tag">${item.tag}</span>
                            <div style="font-weight:bold; font-size:18px; margin-bottom:5px;">${item.name}</div>
                            <p style="font-size:14px; color:#666; margin:0;">${item.desc}</p>
                            <a href="https://www.google.com/maps/search/?api=1&query=${item.map}" target="_blank" class="btn-nav">ğŸ“ é–‹å•Ÿå°èˆª</a>
                        </div>
                    </div>
                `;
            });
            document.getElementById('itinerary-content').innerHTML = html;
        }

        // Expense System
        function addExpense() {
            const name = document.getElementById('exp-name').value;
            const amt = document.getElementById('exp-amt').value;
            if(!name || !amt) return;
            const exps = JSON.parse(localStorage.getItem('ice_exp') || '[]');
            exps.push({name, isk: parseFloat(amt)});
            localStorage.setItem('ice_exp', JSON.stringify(exps));
            document.getElementById('exp-name').value = '';
            document.getElementById('exp-amt').value = '';
            loadExpenses();
        }

        function loadExpenses() {
            const exps = JSON.parse(localStorage.getItem('ice_exp') || '[]');
            const list = document.getElementById('expense-list');
            let totalIsk = 0;
            list.innerHTML = exps.map(e => {
                totalIsk += e.isk;
                return `<div class="expense-item"><span>${e.name}</span><span>${e.isk} ISK</span></div>`;
            }).join('');
            document.getElementById('total-isk').innerText = totalIsk.toLocaleString();
            document.getElementById('total-twd').innerText = (totalIsk * exchangeRate).toLocaleString(undefined, {maximumFractionDigits: 0});
        }

        function clearExpenses() { if(confirm('æ¸…é™¤æ‰€æœ‰è¨˜å¸³è³‡æ–™ï¼Ÿ')) { localStorage.removeItem('ice_exp'); loadExpenses(); } }

        // Checklist System
        function loadChecklist() {
            const status = JSON.parse(localStorage.getItem('ice_check') || '{}');
            const container = document.getElementById('checklist-container');
            container.innerHTML = checklistItems.map(item => `
                <div class="check-item">
                    <input type="checkbox" id="${item}" ${status[item] ? 'checked' : ''} onchange="toggleCheck('${item}')">
                    <label for="${item}">${item}</label>
                </div>
            `).join('');
        }

        function toggleCheck(item) {
            const status = JSON.parse(localStorage.getItem('ice_check') || '{}');
            status[item] = !status[item];
            localStorage.setItem('ice_check', JSON.stringify(status));
        }

        function showFocus(is, en) {
            document.getElementById('focus-text').innerHTML = `<h1 style="font-size:3rem">${is}</h1><p>${en}</p>`;
            document.getElementById('focus-modal').style.display = 'flex';
        }

        // Init
        window.onload = () => {
            const tabs = document.getElementById('day-tabs');
            for(let i=1; i<=13; i++) {
                const btn = document.createElement('div');
                btn.className = 'day-tab';
                btn.id = 'tab-day-' + i;
                btn.innerText = 'D' + i;
                btn.onclick = () => renderDay(i);
                tabs.appendChild(btn);
            }
            renderDay(2); // é è¨­é¡¯ç¤ºç¬¬äºŒå¤©
            loadExpenses();
            loadChecklist();
            // éš¨æ©Ÿé¢¨é€Ÿè­¦å ±æ¸¬è©¦
            if(Math.random() > 0.4) document.getElementById('storm-alert').style.display = 'block';
        };
    </script>
</body>
</html>
